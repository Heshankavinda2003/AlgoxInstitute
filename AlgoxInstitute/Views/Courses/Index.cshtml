@model IEnumerable<AlgoxInstitute.Models.Course>

@{
    ViewData["Title"] = "Explore Our Courses";
}

<section id="courses" class="py-5">
    <div class="container">
        <div class="text-center mb-4">
            <h1 class="fw-bold">Explore Our Courses</h1>

            @if (User.IsInRole("Teacher") || User.IsInRole("Admin"))
            {
                <a asp-action="Create" class="btn btn-primary mt-3">+ Create New Course</a>
            }
        </div>

        <div class="row g-4">
            @if (!Model.Any())
            {
                <div class="alert alert-info text-center">No courses found. Teachers need to add some!</div>
            }

            @foreach (var item in Model)
            {
                <div class="col-md-3">
                    <div class="card h-100 shadow-sm">
                        <img src="~/images/service2.png" class="card-img-top p-3" style="height: 150px; object-fit: contain;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">@item.Title</h5>
                            <p class="card-text small">@item.Description</p>

                            @if (!string.IsNullOrEmpty(item.PdfUrl))
                            {
                                <span class="badge bg-info text-dark mb-2 align-self-start">Offline Available</span>
                            }

                            <div class="mt-auto">
                                @if (User.IsInRole("Student"))
                                {
                                    <form asp-action="Enroll" asp-route-id="@item.Id" method="post">
                                        <button type="submit" class="btn btn-primary w-100">Enroll Now</button>
                                    </form>
                                }
                                else
                                {
                                    <button class="btn btn-outline-secondary w-100" disabled>View Only</button>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>